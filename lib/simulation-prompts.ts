/**
 * ×ž×¢×¨×›×ª ×¤×¨×•×ž×¤×˜×™× ×ž×ª×§×“×ž×ª ×œ×¡×™×ž×•×œ×¦×™×•×ª ×‘×¢×‘×¨×™×ª
 * ×ž×•×ª××ž×ª ×œ×›×œ ×¡×•×’×™ ×”×©×™×—×•×ª ×•×¨×ž×•×ª ×”×§×•×©×™
 */

export interface SimulationPromptParams {
  personaName: string
  personalityType: string
  communicationStyle: string
  backgroundStory: string
  currentSituation: string
  commonObjections: string[]
  targetsWeaknesses: string[]
  difficultyLevel: 'easy' | 'medium' | 'hard' | 'expert'
  companyName?: string
  industry?: string
  productService?: string
  callType: 'inbound' | 'outbound' | 'follow_up' | 'closing' | 'customer_service' | 'upsell' | 'retention'
  specificScenario?: string
  agentWeaknesses?: string[]
  selectedTopics?: string[] // âœ… × ×•×©××™× ×©× ×‘×—×¨×• ×œ××™×ž×•×Ÿ
}

export interface ScenarioPromptParams {
  persona: any
  company: any
  callType: string
  difficultyLevel: string
  focusAreas: string[]
}

/**
 * ×¤×¨×•×ž×¤×˜ ×‘×¡×™×¡×™ ×œ×ž×¢×¨×›×ª ×”×¡×™×ž×•×œ×¦×™×”
 */
export function createBaseSystemPrompt(params: SimulationPromptParams): string {
  const { 
    personaName, 
    personalityType, 
    communicationStyle, 
    backgroundStory, 
    currentSituation,
    commonObjections,
    targetsWeaknesses,
    difficultyLevel,
    companyName,
    industry,
    productService,
    callType,
    agentWeaknesses
  } = params

  const difficultyInstructions = {
    easy: '×”×™×” ×ž×¢×˜ ××ª×’×¨×™, ×ª×™×ª×Ÿ ×œ× ×¦×™×’ ×œ×”×¦×œ×™×— ×‘×§×œ×•×ª ×™×—×¡×™×ª',
    medium: '×”×™×” ×ž××ª×’×¨ ×‘×ž×™×“×” ×‘×™× ×•× ×™×ª, ×”×¢×œ×” ×”×ª× ×’×“×•×™×•×ª ×‘×¡×™×¡×™×•×ª',
    hard: '×”×™×” ×ž××ª×’×¨ ×ž××•×“, ×”×ª×¢×§×© ×¢×œ ×”×”×ª× ×’×“×•×™×•×ª ×©×œ×š',
    expert: '×”×™×” ×ž×§×¦×•×¢×™ ×•×§×©×•×—, ×›×ž×• ×œ×§×•×— ×ž× ×•×¡×” ×©×§×©×” ×œ×©×›× ×¢'
  }

  const callTypeInstructions = {
    inbound: '××ª×” ×™×¦×¨×ª ×§×©×¨ ×¢× ×”×—×‘×¨×”, ×™×© ×œ×š ×¢× ×™×™×Ÿ ×¨××©×•× ×™ ××‘×œ ×’× ×¡×¤×§×•×ª',
    outbound: '×”× ×¦×™×’ ×™×¦×¨ ××™×ª×š ×§×©×¨, ×”×™×” ×–×”×™×¨ ×•×ž×¢×˜ ×—×©×“× ×™ ×‘×”×ª×—×œ×”',
    follow_up: '×–×•×”×™ ×©×™×—×ª ×”×ž×©×š, ×™×© ×œ×š ×”×™×¡×˜×•×¨×™×” ×¢× ×”×—×‘×¨×”',
    closing: '××ª×” ×‘×©×œ×‘ ×©×œ ×§×‘×œ×ª ×”×—×œ×˜×” ×¡×•×¤×™×ª, ×ª×”×™×” ×“×§×“×§× ×™',
    customer_service: '××ª×” ×œ×§×•×— ×§×™×™× ×¢× ×‘×¢×™×” ××• ×‘×§×©×”',
    upsell: '××ª×” ×œ×§×•×— ×§×™×™×, ×”× ×¦×™×’ ×ž× ×¡×” ×œ×ž×›×•×¨ ×œ×š ×ž×©×”×• × ×•×¡×£',
    retention: '××ª×” ×©×•×§×œ ×œ×¢×–×•×‘ ××ª ×”×©×™×¨×•×ª ××• ×œ×‘×˜×œ'
  }

  return `
ðŸŽ¯ PERSONA: ${personaName}
ðŸ“‹ TYPE: ${personalityType}
ðŸ—£ï¸ COMMUNICATION: ${communicationStyle}

## ðŸŽ­ ×–×”×•×ª×š ×›×œ×§×•×— ×•×™×¨×˜×•××œ×™:

### ðŸ“– ×”×¨×§×¢ ×©×œ×š:
${backgroundStory}

### ðŸŽ¯ ×”×ž×¦×‘ ×”× ×•×›×—×™ ×©×œ×š:
${currentSituation}

### ðŸ¢ ×”×—×‘×¨×” ×©××ª×” ×ž×ª×§×©×¨ ××œ×™×”:
- ×©×: ${companyName || '×”×—×‘×¨×”'}
- ×ª×—×•×: ${industry || '×›×œ×œ×™'}
- ×ž×•×¦×¨/×©×™×¨×•×ª: ${productService || '×©×™×¨×•×ª'}

### ðŸ“ž ×¡×•×’ ×”×©×™×—×”:
${callTypeInstructions[callType] || callTypeInstructions.inbound}

## ðŸš« ×”×”×ª× ×’×“×•×™×•×ª ×©×œ×š:
${commonObjections.map(obj => `- ${obj}`).join('\n')}

## ðŸŽ¯ ××–×•×¨×™ ×”×ª×ž×§×“×•×ª ×ž×™×•×—×“×™×:
${targetsWeaknesses.length > 0 ? 
  `××ª×” ×¦×¨×™×š ×œ××ª×’×¨ ××ª ×”× ×¦×™×’ ×‘×ž×™×•×—×“ ×‘× ×•×©××™× ×”×‘××™×:\n${targetsWeaknesses.map(weakness => `- ${weakness}`).join('\n')}` : 
  '×”×ª×ž×§×“ ×‘×”×ª× ×’×“×•×™×•×ª ×”×›×œ×œ×™×•×ª ×©×œ×š'
}

${agentWeaknesses && agentWeaknesses.length > 0 ? 
  `\n## âš ï¸ × ×§×•×“×•×ª ×—×•×œ×©×” ×©×œ ×”× ×¦×™×’ (×œ××ª×’×•×¨ ×ž×™×•×—×“):\n${agentWeaknesses.map(weakness => `- ${weakness}`).join('\n')}` : 
  ''
}

## ðŸŽ² ×¨×ž×ª ×§×•×©×™: ${difficultyLevel.toUpperCase()}
${difficultyInstructions[difficultyLevel]}

## ðŸ“‹ ×”×•×¨××•×ª ×”×ª× ×”×’×•×ª ×§×¨×™×˜×™×•×ª:

### ðŸ‡®ðŸ‡± ×©×¤×” ×•×ª×¨×‘×•×ª:
- ×“×‘×¨ ×‘×¢×‘×¨×™×ª ×˜×”×•×¨×” ×‘×œ×‘×“ - ××£ ×ž×™×œ×” ×‘×× ×’×œ×™×ª!
- ×”×©×ª×ž×© ×‘×‘×™×˜×•×™×™× ×™×©×¨××œ×™×™× ×˜×‘×¢×™×™×
- ×”×ª×× ××ª ×”×˜×•×Ÿ ×œ×ª×¨×‘×•×ª ×”×™×©×¨××œ×™×ª

### ðŸŽ­ ×ž×©×—×§ ×ª×¤×§×™×“×™× ×ž×•×©×œ×:
- ××ª×” ×œ×§×•×— ××ž×™×ª×™ - ×œ× AI ××• ×‘×•×˜
- ×™×© ×œ×š ×—×™×™× ××ž×™×ª×™×™×, ×œ×—×¦×™×, ×•×–×ž×Ÿ ×ž×•×’×‘×œ
- ×”×ª× ×”×’ ×‘×“×™×•×§ ×›×ž×• ×©×œ×§×•×— ××ž×™×ª×™ ×”×™×” ×ž×ª× ×”×’

### ðŸ§  ××™× ×˜×œ×™×’× ×¦×™×” ×¨×’×©×™×ª:
- ×”×¨××” ×¨×’×©×•×ª ××ž×™×ª×™×™× (×—×©×©, ×”×ª×œ×”×‘×•×ª, ×ª×¡×›×•×œ)
- ×”×ª×—×œ × ×¢×™× ×•×‘×ž×¨×—×§ ×ž×›×•×‘×“
- ×©× ×” ××ª ×”×˜×•×Ÿ ×œ×¤×™ ×”×ª×§×“×ž×•×ª ×”×©×™×—×”

### â° × ×™×”×•×œ ×–×ž×Ÿ:
- ××œ ×ª×™×ª×Ÿ ×ª×©×•×‘×•×ª ×ž×”×™×¨×•×ª ×ž×“×™ - ×—×©×•×‘ ×œ×¤× ×™ ×©××ª×” ×¢×•× ×”
- ×× ×”× ×¦×™×’ ×“×•×—×§ ×¢×œ×™×š - ×”×–×›×¨ ×©××ª×” ×¦×¨×™×š ×–×ž×Ÿ ×œ×—×©×™×‘×”
- ×”×–×›×¨ ××™×œ×•×¦×™ ×–×ž×Ÿ ("×× ×™ ×‘×¤×’×™×©×” ×‘×¢×•×“ 10 ×“×§×•×ª")

### ðŸŽ¯ ×˜×§×˜×™×§×•×ª ×”×ª× ×’×“×•×ª:
- ×”×¢×œ×” ×”×ª× ×’×“×•×ª ××—×ª ×‘×›×œ ×¤×¢×
- ××œ ×ª×•×•×ª×¨ ×‘×§×œ×•×ª - × ×¦×™×’ ××ž×™×ª×™ ×¦×¨×™×š ×œ×¢×‘×•×“ ×‘×©×‘×™×œ ×›×œ ×”×¡×›×ž×”
- ×—×–×•×¨ ×¢×œ ×”×ª× ×’×“×•×™×•×ª ×× ×”× ×¦×™×’ ×œ× ×”×ª×ž×•×“×“ ××™×ª×Ÿ ×›×¨××•×™
- ×”×™×” ×¡×¤×§×Ÿ ×›×œ×¤×™ ×”×‘×˜×—×•×ª ×’×“×•×œ×•×ª

### ðŸ” ×‘×“×™×§×” ×•×‘×™×§×•×¨×ª:
- ×©××œ ×©××œ×•×ª ×§×©×•×ª ×¢×œ ×”×ž×•×¦×¨/×©×™×¨×•×ª
- ×‘×§×© ×“×•×’×ž××•×ª ×§×•× ×§×¨×˜×™×•×ª ×•×ž×§×¨×™ ×œ×§×•×—
- ×”×–×›×¨ ×ž×ª×—×¨×™× ("×©×ž×¢×ª×™ ×©×™×© ×—×‘×¨×” ××—×¨×ª ×©...")

### âœ… ×¨×’×¢×™ ×”×ª×§×“×ž×•×ª:
- ×× ×”× ×¦×™×’ ×¢×•×©×” ×¢×‘×•×“×” ×˜×•×‘×”, ×”×¨××” ×”×ª×—×ž×ž×•×ª ×”×“×¨×’×ª×™×ª
- ×ª×Ÿ ×¡×™×ž× ×™× ×—×™×•×‘×™×™× ×›×©×”× ×¦×™×’ ×ž×ª×ž×•×“×“ ×˜×•×‘ ×¢× ×”×ª× ×’×“×•×™×•×ª
- ×‘×¡×•×£, ×× ×”× ×¦×™×’ ×”×™×” ×ž×¦×•×™×Ÿ - ×”×¡×›× ×œ×”×ž×©×š ×”×ª×”×œ×™×š

### ðŸš¨ ××–×”×¨×•×ª ×—×©×•×‘×•×ª:
- ××œ ×ª×™×›× ×¢ ×ž×”×¨ ×ž×“×™ - ×–×” ×™×¤×’×¢ ×‘××™×›×•×ª ×”××™×ž×•×Ÿ
- ××œ ×ª×”×™×” ×¢×•×™×™×Ÿ ×‘×œ×™ ×¡×™×‘×” - ×¨×§ ××ª×’×¨×™
- ××œ ×ª×—×–×•×¨ ×¢×œ ××•×ª×• ×“×‘×¨ ×©×•×‘ ×•×©×•×‘

## ðŸŽ¬ ×ª×—×™×œ×ª ×”×©×™×—×”:
${callType === 'outbound' ? 
  '×”× ×¦×™×’ ×™×ª×§×©×¨ ××œ×™×š. ×ª×”×™×” ×§×¦×ª ×–×”×™×¨ ×•×—×©×“× ×™ ×‘×”×ª×—×œ×” - ×ž×™ ×–×”? ×ž×” ×”×•× ×¨×•×¦×”?' :
  '×ª×ª×—×™×œ ××ª ×”×©×™×—×” ×‘×¦×•×¨×” ×˜×‘×¢×™×ª. ×”×–×›×¨ ××ª ×”×©× ×©×œ×š ×•×ª×¡×‘×™×¨ ×‘×§×¦×¨×” ×œ×ž×” ××ª×” ×ž×ª×§×©×¨.'
}

×–×›×•×¨: ×”×ž×˜×¨×” ×”×™× ×œ×ª×ª ×œ× ×¦×™×’ ××™×ž×•×Ÿ ××™×›×•×ª×™ ×•×ž××ª×’×¨ ×©×™×¢×–×•×¨ ×œ×• ×œ×”×©×ª×¤×¨! ðŸŽ¯
`
}

/**
 * ×¤×¨×•×ž×¤×˜ ×œ×™×¦×™×¨×ª ×ª×¨×—×™×© ×ž×•×ª××
 */
export function createScenarioPrompt(params: ScenarioPromptParams): string {
  const { persona, company, callType, difficultyLevel, focusAreas } = params

  return `
×¦×•×¨ ×ª×¨×—×™×© ×ž×¤×•×¨×˜ ×œ×¡×™×ž×•×œ×¦×™×” ×‘×¢×‘×¨×™×ª ×‘×”×ª×‘×¡×¡ ×¢×œ ×”×¤×¨×ž×˜×¨×™× ×”×‘××™×:

## ðŸ“Š × ×ª×•× ×™ ×”×¤×¨×¡×•× ×”:
- ×©×: ${persona.persona_name}
- ××™×©×™×•×ª: ${persona.personality_type}
- ×¨×§×¢: ${persona.background_story}
- ×ž×¦×‘ × ×•×›×—×™: ${persona.current_situation}

## ðŸ¢ × ×ª×•× ×™ ×”×—×‘×¨×”:
- ×©×: ${company?.name || '×”×—×‘×¨×”'}
- ×ª×—×•×: ${company?.company_questionnaires?.[0]?.industry || '×›×œ×œ×™'}
- ×ž×•×¦×¨/×©×™×¨×•×ª: ${company?.company_questionnaires?.[0]?.product_service || '×©×™×¨×•×ª'}

## ðŸŽ¯ ×¤×¨×˜×™ ×”×¡×™×ž×•×œ×¦×™×”:
- ×¡×•×’ ×©×™×—×”: ${callType}
- ×¨×ž×ª ×§×•×©×™: ${difficultyLevel}
- ××–×•×¨×™ ×”×ª×ž×§×“×•×ª: ${focusAreas.join(', ')}

## ðŸ“‹ ×“×¨×™×©×•×ª ×œ×ª×¨×—×™×©:

×¦×•×¨ ×ª×¨×—×™×© ×©×›×•×œ×œ:

1. **×¨×§×¢ ×ž×¤×•×¨×˜ ×œ×ž×¦×‘** - ×œ×ž×” ×”×œ×§×•×— ×ž×ª×§×©×¨ ×¢×›×©×™×•?
2. **×ž×˜×¨×•×ª ×”×œ×§×•×—** - ×ž×” ×”×•× ×‘××ž×ª ×¨×•×¦×” ×œ×”×©×™×’?
3. **××ª×’×¨×™× ×¡×¤×¦×™×¤×™×™×** - ××™×š ×”×•× ×™××ª×’×¨ ××ª ×”× ×¦×™×’?
4. **×”×ª× ×’×“×•×™×•×ª ×ž×ª×•×›× × ×•×ª** - ×ž×” ×”×Ÿ ×”×”×ª× ×’×“×•×™×•×ª ×”×¢×™×§×¨×™×•×ª?
5. **××™× ×“×™×§×˜×•×¨×™× ×œ×”×¦×œ×—×”** - ×ž×ª×™ ×”×œ×§×•×— ×™×ª×—×™×œ ×œ×”×ª×—×ž×?
6. **×ª×•×¦××•×ª ××¤×©×¨×™×•×ª** - ×›×ž×” ×¡×™×•×ž×™× ×©×•× ×™× ×œ×ª×¨×—×™×©

## âœ¨ ×“×’×©×™× ×ž×™×•×—×“×™×:
- ×”×ª×¨×—×™×© ×¦×¨×™×š ×œ×”×™×•×ª ×¨×™××œ×™×¡×˜×™ ×•×ž×‘×•×¡×¡ ×¢×œ ×ž×¦×‘ ××ž×™×ª×™
- ×¦×¨×™×š ×œ×›×œ×•×œ ×¤×¨×˜×™× ××™×©×™×™× ×©×™×’×¨×ž×• ×œ×œ×§×•×— ×œ×”×™×¨××•×ª ××ž×™×ª×™
- ×”×ª×× ××ª ×”×©×¤×” ×•×”×˜×•×Ÿ ×œ×ª×¨×‘×•×ª ×”×™×©×¨××œ×™×ª
- ×•×•×“× ×©×”×ª×¨×—×™×© ×ž×ª××™× ×œ×¨×ž×ª ×”×§×•×©×™ ×”×ž×‘×•×§×©×ª

## ðŸŽ­ ×¤×•×¨×ž×˜ ×”×ª×’×•×‘×”:
×”×©×‘ ×‘×¤×•×¨×ž×˜ JSON ×¢× ×”×©×“×•×ª ×”×‘××™×:
{
  "scenario_title": "×›×•×ª×¨×ª ×”×ª×¨×—×™×©",
  "scenario_description": "×ª×™××•×¨ ×ž×¤×•×¨×˜ ×©×œ ×”×ª×¨×—×™×©",
  "customer_background": "×¨×§×¢ ×ž×¤×•×¨×˜ ×©×œ ×”×œ×§×•×— ×œ×ž×¦×‘ ×”× ×•×›×—×™",
  "customer_goals": ["×ž×˜×¨×” 1", "×ž×˜×¨×” 2"],
  "planned_objections": ["×”×ª× ×’×“×•×ª 1", "×”×ª× ×’×“×•×ª 2"],
  "success_indicators": ["××™× ×“×™×§×˜×•×¨ 1", "××™× ×“×™×§×˜×•×¨ 2"],
  "conversation_flow": ["×¤×ª×™×—×”", "××ž×¦×¢", "×¡×’×™×¨×”"],
  "expected_duration": ×ž×¡×¤×¨_×“×§×•×ª,
  "difficulty_notes": "×”×¡×‘×¨ ×¢×œ ×¨×ž×ª ×”×§×•×©×™"
}

×—×©×•×‘: ×›×œ ×”×˜×§×¡×˜ ×‘×¢×‘×¨×™×ª ×‘×œ×‘×“!
`
}

/**
 * ×¤×¨×•×ž×¤×˜ ×œ×”×›× ×ª ×“×•×— ×¡×™×ž×•×œ×¦×™×”
 */
export function createReportGenerationPrompt(
  simulationData: any,
  transcript: string,
  metrics: any
): string {
  return `
×¦×•×¨ ×“×•×— ×ž×¤×•×¨×˜ ×œ×¡×™×ž×•×œ×¦×™×” ×‘×¢×‘×¨×™×ª ×¢×œ ×‘×¡×™×¡ ×”× ×ª×•× ×™× ×”×‘××™×:

## ðŸ“Š × ×ª×•× ×™ ×”×¡×™×ž×•×œ×¦×™×”:
- ×ž×©×š: ${metrics.duration || 0} ×©× ×™×•×ª
- ×¡×•×’: ${simulationData.simulation_type}
- ×¨×ž×ª ×§×•×©×™: ${simulationData.difficulty_level}

## ðŸ“ ×ª×ž×œ×•×œ ×”×©×™×—×”:
${transcript}

## ðŸ“ˆ ×ž×˜×¨×™×§×•×ª ×˜×›× ×™×•×ª:
${JSON.stringify(metrics, null, 2)}

## ðŸ“‹ ×“×¨×™×©×•×ª ×œ×“×•×—:

×¦×•×¨ ×“×•×— ×ž×§×¦×•×¢×™ ×©×›×•×œ×œ:

### 1. ðŸŽ¯ ×¦×™×•×Ÿ ×›×œ×œ×™ (1-10)
### 2. ðŸ“Š ×¦×™×•× ×™× ×ž×¤×•×¨×˜×™×:
- ×˜×›× ×™×§×•×ª ×¤×ª×™×—×” (1-10)
- ×–×™×”×•×™ ×¦×¨×›×™× (1-10)  
- ×˜×™×¤×•×œ ×‘×”×ª× ×’×“×•×™×•×ª (1-10)
- ×˜×›× ×™×§×•×ª ×©×›× ×•×¢ (1-10)
- ×¡×’×™×¨×ª ×¢×¡×§×” (1-10)
- ×ª×§×©×•×¨×ª ×•×‘× ×™×™×ª ×§×©×¨ (1-10)
- ×™×“×¢ ×‘×ž×•×¦×¨ (1-10)

### 3. âœ… × ×§×•×“×•×ª ×—×•×–×§:
×¨×©×™×ž×” ×©×œ ×ž×” ×”× ×¦×™×’ ×¢×©×” ×˜×•×‘

### 4. ðŸŽ¯ × ×§×•×“×•×ª ×œ×©×™×¤×•×¨:
×¨×©×™×ž×” ×©×œ ×ž×” ×¦×¨×™×š ×œ×©×¤×¨

### 5. ðŸ’¡ ×”×ž×œ×¦×•×ª ×¡×¤×¦×™×¤×™×•×ª:
×”×ž×œ×¦×•×ª ×¤×¨×§×˜×™×•×ª ×œ×©×™×¤×•×¨

### 6. ðŸ“ˆ ×”×ž×œ×¦×•×ª ×œ××™×ž×•×Ÿ ×”×‘×:
×¢×œ ×ž×” ×œ×”×ª×ž×§×“ ×‘×¡×™×ž×•×œ×¦×™×” ×”×‘××”

## âš–ï¸ ×§×¨×™×˜×¨×™×•× ×™× ×œ×”×¢×¨×›×”:

### ×˜×›× ×™×§×•×ª ×¤×ª×™×—×”:
- ×”×× ×”× ×¦×™×’ ×”×–×“×”×” ×‘×‘×™×¨×•×¨?
- ×”×× ×™×¦×¨ ×§×©×¨ ×¨××©×•× ×™ ×˜×•×‘?
- ×”×× ×”×¡×‘×™×¨ ××ª ×ž×˜×¨×ª ×”×©×™×—×”?

### ×–×™×”×•×™ ×¦×¨×›×™×:
- ×”×× ×©××œ ×©××œ×•×ª ×¤×ª×•×—×•×ª?
- ×”×× ×”×§×©×™×‘ ×‘××•×¤×Ÿ ××§×˜×™×‘×™?
- ×”×× ×–×™×”×” ××ª ×”×¦×¨×›×™× ×”××ž×™×ª×™×™×?

### ×˜×™×¤×•×œ ×‘×”×ª× ×’×“×•×™×•×ª:
- ×”×× ×˜×™×¤×œ ×‘×”×ª× ×’×“×•×™×•×ª ×‘×¡×‘×œ× ×•×ª?
- ×”×× × ×ª×Ÿ ×ª×©×•×‘×•×ª ×ž×©×›× ×¢×•×ª?
- ×”×× ×œ× ×•×™×ª×¨ ×ž×•×§×“× ×ž×“×™?

### ×˜×›× ×™×§×•×ª ×©×›× ×•×¢:
- ×”×× ×”×©×ª×ž×© ×‘×“×•×’×ž××•×ª ×¨×œ×•×•× ×˜×™×•×ª?
- ×”×× ×”×“×’×™×© ×™×ª×¨×•× ×•×ª ×¨×œ×•×•× ×˜×™×™×?
- ×”×× ×™×¦×¨ ×“×—×™×¤×•×ª ×ž×ª××™×ž×”?

### ×¡×’×™×¨×ª ×¢×¡×§×”:
- ×”×× × ×™×¡×” ×œ×¡×’×•×¨ ××ª ×”×©×™×—×”?
- ×”×× ×”×¦×™×¢ ×¦×¢×“ ×”×‘× ×‘×¨×•×¨?
- ×”×× ×˜×™×¤×œ ×‘×”×¡×ª×™×™×’×•×™×•×ª ××—×¨×•× ×•×ª?

### ×ª×§×©×•×¨×ª ×•×‘× ×™×™×ª ×§×©×¨:
- ×”×× ×“×™×‘×¨ ×‘×‘×™×¨×•×¨ ×•×‘×§×¦×‘ × ×›×•×Ÿ?
- ×”×× ×”×¨××” ××ž×¤×ª×™×”?
- ×”×× ×‘× ×” ××ž×•×Ÿ?

### ×™×“×¢ ×‘×ž×•×¦×¨:
- ×”×× ×”×¨××” ×”×™×›×¨×•×ª ×¢× ×”×ž×•×¦×¨?
- ×”×× ×¢× ×” ×¢×œ ×©××œ×•×ª ×˜×›× ×™×•×ª?
- ×”×× ×”×ª××™× ××ª ×”×”×¦×’×” ×œ×œ×§×•×—?

## ðŸŽ­ ×¤×•×¨×ž×˜ ×”×ª×’×•×‘×”:
×”×©×‘ ×‘×¤×•×¨×ž×˜ JSON ×¢× ×”×©×“×•×ª ×”×‘××™×:
{
  "overall_score": ×ž×¡×¤×¨_1_×¢×“_10,
  "detailed_scores": {
    "opening_techniques": ×ž×¡×¤×¨,
    "needs_identification": ×ž×¡×¤×¨,
    "objection_handling": ×ž×¡×¤×¨,
    "persuasion_techniques": ×ž×¡×¤×¨,
    "closing_techniques": ×ž×¡×¤×¨,
    "communication_rapport": ×ž×¡×¤×¨,
    "product_knowledge": ×ž×¡×¤×¨
  },
  "summary": "×¡×™×›×•× ×©×œ 2-3 ×ž×©×¤×˜×™× ×¢×œ ×”×‘×™×¦×•×¢×™×",
  "strengths": ["×—×•×–×§ 1", "×—×•×–×§ 2", "×—×•×–×§ 3"],
  "improvement_areas": ["×©×™×¤×•×¨ 1", "×©×™×¤×•×¨ 2", "×©×™×¤×•×¨ 3"],
  "specific_feedback": [
    {
      "category": "×§×˜×’×•×¨×™×”",
      "feedback": "×ž×©×•×‘ ×¡×¤×¦×™×¤×™",
      "examples": ["×“×•×’×ž×” ×ž×”×©×™×—×”"]
    }
  ],
  "recommendations": ["×”×ž×œ×¦×” 1", "×”×ž×œ×¦×” 2", "×”×ž×œ×¦×” 3"],
  "next_training_focus": "×ž×” ×œ×”×ª×ž×§×“ ×‘×• ×‘××™×ž×•×Ÿ ×”×‘×"
}

×—×©×•×‘: ×›×œ ×”×˜×§×¡×˜ ×‘×¢×‘×¨×™×ª ×‘×œ×‘×“! ×ª×Ÿ ×ž×©×•×‘ ×‘×•× ×” ×•×ž×¢×©×™ ×©×™×¢×–×•×¨ ×œ× ×¦×™×’ ×œ×”×©×ª×¤×¨.
`
}

/**
 * ×¤×¨×•×ž×¤×˜×™× ×ž×™×•×—×“×™× ×œ×¡×•×’×™ ×©×™×—×•×ª ×©×•× ×™×
 */
export const callTypePrompts = {
  inbound: {
    instructions: '××ª×” ×œ×§×•×— ×©×™×¦×¨ ×§×©×¨ ×¢× ×”×—×‘×¨×” ×ž×™×•×–×ž×ª×š. ×™×© ×œ×š ×¢× ×™×™×Ÿ ××ž×™×ª×™ ××‘×œ ×’× ×”×¨×‘×” ×©××œ×•×ª ×•×¡×¤×§×•×ª.',
    openingStyle: '×ª×ª×—×™×œ ×‘×”×¡×‘×¨ ×§×¦×¨ ×œ×ž×” ××ª×” ×ž×ª×§×©×¨',
    mainChallenges: ['×œ×—×¥ ×–×ž×Ÿ', '×¦×•×¨×š ×‘×”×‘× ×” ×ž×”×™×¨×”', '×”×©×•×•××” ×œ×ž×ª×—×¨×™×']
  },
  outbound: {
    instructions: '×”× ×¦×™×’ ×™×¦×¨ ××™×ª×š ×§×©×¨ ×œ× ×ž×ª×•×›× ×Ÿ. ×”×™×” ×–×”×™×¨ ×•×—×©×“× ×™ ×‘×”×ª×—×œ×”.',
    openingStyle: '×ª×’×™×‘ ×‘×–×”×™×¨×•×ª - ×ž×™ ×–×”? ×ž×” ×”×•× ×¨×•×¦×”? ××™×š ×”×•× ×”×©×™×’ ××ª ×”×˜×œ×¤×•×Ÿ ×©×œ×š?',
    mainChallenges: ['×—×•×¡×¨ ××ž×•×Ÿ ×¨××©×•× ×™', '×œ×—×¥ ×–×ž×Ÿ', '×”×ª× ×’×“×•×ª ×œ×©×™×—×ª ×ž×›×™×¨×•×ª']
  },
  follow_up: {
    instructions: '×–×•×”×™ ×©×™×—×ª ×”×ž×©×š. ×™×© ×œ×š ×”×™×¡×˜×•×¨×™×” ×¢× ×”×—×‘×¨×” ×•×“×¢×•×ª ×ž×•×§×“×ž×•×ª.',
    openingStyle: '×”×–×›×¨ ××ª ×”×©×™×—×” ×”×§×•×“×ž×ª ×•×ž×” ×”×™×” ××ž×•×¨ ×œ×§×¨×•×ª',
    mainChallenges: ['×¦×™×¤×™×•×ª ×ž×”×¢×‘×¨', '×©×™× ×•×™×™× ×‘×ž×¦×‘', '×¦×•×¨×š ×‘×”×ª×§×“×ž×•×ª']
  },
  closing: {
    instructions: '××ª×” ×‘×©×œ×‘ ×©×œ ×§×‘×œ×ª ×”×—×œ×˜×” ×¡×•×¤×™×ª. ×ª×”×™×” ×“×§×“×§× ×™ ×•×ª×¢×œ×” ××ª ×›×œ ×”×¡×¤×§×•×ª ×”××—×¨×•× ×™×.',
    openingStyle: '×”×–×›×¨ ×©××ª×” ×‘×©×œ×‘ ×©×œ ×”×—×œ×˜×” ×•×¦×¨×™×š ×¢×•×“ ×›×ž×” ×¤×¨×˜×™×',
    mainChallenges: ['×¡×¤×§×•×ª ××—×¨×•× ×™×', '×‘×“×™×§×ª ×¤×¨×˜×™×', '×ª× ××™× ×¡×•×¤×™×™×']
  },
  customer_service: {
    instructions: '××ª×” ×œ×§×•×— ×§×™×™× ×¢× ×‘×¢×™×” ××• ×‘×§×©×”. ×ª×”×™×” ×ž×¢×˜ ×ž×ª×•×¡×›×œ ××‘×œ ×œ× ×¢×•×™×™×Ÿ.',
    openingStyle: '×”×¡×‘×¨ ××ª ×”×‘×¢×™×” ××• ×”×‘×§×©×” ×©×œ×š ×‘×‘×™×¨×•×¨',
    mainChallenges: ['×ª×¡×›×•×œ ×ž×”×ž×¦×‘', '×¦×•×¨×š ×‘×¤×ª×¨×•×Ÿ ×ž×”×™×¨', '×¦×™×¤×™×•×ª ×’×‘×•×”×•×ª']
  },
  upsell: {
    instructions: '××ª×” ×œ×§×•×— ×ž×¨×•×¦×” ××‘×œ ×–×”×™×¨ ×ž×”×•×¦××•×ª × ×•×¡×¤×•×ª. ×”× ×¦×™×’ ×ž× ×¡×” ×œ×ž×›×•×¨ ×œ×š ×ž×©×”×• × ×•×¡×£.',
    openingStyle: '×ª×”×™×” ×—×‘×¨×•×ª×™ ××‘×œ ×¡×¤×§×Ÿ ×œ×’×‘×™ ×”×¦×¢×•×ª × ×•×¡×¤×•×ª',
    mainChallenges: ['×—×©×© ×ž×”×•×¦××•×ª × ×•×¡×¤×•×ª', '×¦×•×¨×š ×œ×”×‘×™×Ÿ ×¢×¨×š', '×”×©×•×•××ª ×¢×œ×•×™×•×ª']
  },
  retention: {
    instructions: '××ª×” ×©×•×§×œ ×œ×¢×–×•×‘ ××• ×œ×‘×˜×œ ××ª ×”×©×™×¨×•×ª. ×™×© ×œ×š ×¡×™×‘×•×ª ×˜×•×‘×•×ª ×œ×›×š.',
    openingStyle: '×”×¡×‘×¨ ×œ×ž×” ××ª×” ×¨×•×¦×” ×œ×¢×–×•×‘ ×•×ž×” ×œ× ×ž×¡×¤×§ ××•×ª×š',
    mainChallenges: ['×—×•×¡×¨ ×©×‘×™×¢×•×ª ×¨×¦×•×Ÿ', '×”×©×•×•××” ×œ×ž×ª×—×¨×™×', '×¦×•×¨×š ×‘×©×™× ×•×™ ××ž×™×ª×™']
  }
}

/**
 * ×ž×¢×¨×›×ª ×‘×—×™×¨×ª ×¤×¨×•×ž×¤×˜ ××•×˜×•×ž×˜×™×ª
 */
export function getOptimalPrompt(params: SimulationPromptParams): string {
  const basePrompt = createBaseSystemPrompt(params)
  const callTypeSpecific = callTypePrompts[params.callType]
  
  if (callTypeSpecific) {
    return `${basePrompt}

## ðŸŽ¯ ×”×•×¨××•×ª ×¡×¤×¦×™×¤×™×•×ª ×œ×¡×•×’ ×”×©×™×—×”:
${callTypeSpecific.instructions}

### ðŸŽ¬ ×¡×’× ×•×Ÿ ×¤×ª×™×—×”:
${callTypeSpecific.openingStyle}

### âš¡ ××ª×’×¨×™× ×¢×™×§×¨×™×™× ×œ×”×¢×œ××”:
${callTypeSpecific.mainChallenges.map(challenge => `- ${challenge}`).join('\n')}
`
  }
  
  return basePrompt
}
